<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JS RSA 公钥解密</title>
</head>
<!--引入jsencrypt.js-->
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="./jsencrypt.js"></script>
<script type="text/javascript">
	$(function() {
		$('#testme').click(function() {
			//TODO 如果想要测试密钥加密，然后公钥解密，需要修改encrypt 中的doPublic 为 doPrivate
			// var sign = new JSEncrypt();
			// sign.setPrivateKey($('#privkey').val());
			// var signature = sign.encrypt($('#input').val());
			// console.log('加密后数据:', signature);

			var plain = $("#plainContent").val();

			var rsa = new JSEncrypt();

			// =========================================
			// 用公钥加密
			rsa.setPublicKey($('#pubkey').val());
			var encrypted = rsa.encrypt(plain, false);
			$('#encryptContent').val(encrypted);

			// 用私钥解密
			rsa.setPrivateKey($('#privkey').val());
			var decrypted = rsa.decrypt(encrypted, true);
			$('#decryptContent').val(decrypted);

			// =========================================
			// 用私钥加密
			rsa.setPrivateKey($('#privkey').val());
			var encrypted = rsa.encrypt(plain, true);
			$('#encryptContent2').val(encrypted);

			// 用公钥解密
			rsa.setPublicKey($('#pubkey').val());
			var decrypted = rsa.decrypt(encrypted, false);
			$('#decryptContent2').val(decrypted);

		});
	})
</script>

<body>

	<span> <label for="privkey">Private Key</label> <br /> <textarea id="privkey" rows="15" cols="65">-----BEGIN RSA PRIVATE KEY-----
MIICXQIBAAKBgQDlOJu6TyygqxfWT7eLtGDwajtNFOb9I5XRb6khyfD1Yt3YiCgQ
WMNW649887VGJiGr/L5i2osbl8C9+WJTeucF+S76xFxdU6jE0NQ+Z+zEdhUTooNR
aY5nZiu5PgDB0ED/ZKBUSLKL7eibMxZtMlUDHjm4gwQco1KRMDSmXSMkDwIDAQAB
AoGAfY9LpnuWK5Bs50UVep5c93SJdUi82u7yMx4iHFMc/Z2hfenfYEzu+57fI4fv
xTQ//5DbzRR/XKb8ulNv6+CHyPF31xk7YOBfkGI8qjLoq06V+FyBfDSwL8KbLyeH
m7KUZnLNQbk8yGLzB3iYKkRHlmUanQGaNMIJziWOkN+N9dECQQD0ONYRNZeuM8zd
8XJTSdcIX4a3gy3GGCJxOzv16XHxD03GW6UNLmfPwenKu+cdrQeaqEixrCejXdAF
z/7+BSMpAkEA8EaSOeP5Xr3ZrbiKzi6TGMwHMvC7HdJxaBJbVRfApFrE0/mPwmP5
rN7QwjrMY+0+AbXcm8mRQyQ1+IGEembsdwJBAN6az8Rv7QnD/YBvi52POIlRSSIM
V7SwWvSK4WSMnGb1ZBbhgdg57DXaspcwHsFV7hByQ5BvMtIduHcT14ECfcECQATe
aTgjFnqE/lQ22Rk0eGaYO80cc643BXVGafNfd9fcvwBMnk0iGX0XRsOozVt5Azil
psLBYuApa66NcVHJpCECQQDTjI2AQhFc1yRnCU/YgDnSpJVm1nASoRUnU8Jfm3Oz
uku7JUXcVpt08DFSceCEX9unCuMcT72rAQlLpdZir876
-----END RSA PRIVATE KEY-----</textarea>
	</span>

	<span style="display: inline-block; width: 200px;"> <label for="pubkey">Public Key</label> <br /> <textarea
			id="pubkey" rows="10" cols="65">-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDlOJu6TyygqxfWT7eLtGDwajtN
FOb9I5XRb6khyfD1Yt3YiCgQWMNW649887VGJiGr/L5i2osbl8C9+WJTeucF+S76
xFxdU6jE0NQ+Z+zEdhUTooNRaY5nZiu5PgDB0ED/ZKBUSLKL7eibMxZtMlUDHjm4
gwQco1KRMDSmXSMkDwIDAQAB
-----END PUBLIC KEY-----</textarea>
	</span>

	<hr>
	<br />
	<label for="">明文</label>
	<br />
	<textarea id="plainContent" rows="2" cols="65">这是明文内容</textarea>
	<input id="testme" type="button" value="测试" />
	<br />
	<hr>
	<br />
	<span style="display: inline-block;"> <label>使用公钥加密后</label> <br /> <textarea id="encryptContent" rows="5"
			cols="65"></textarea>
	</span>

	<span style="display: inline-block; width: 200px;"> <label>使用私钥解密后</label> <br /> <textarea id="decryptContent"
			rows="2" cols="65"></textarea>
	</span>

	<br />
	<hr>
	<br />
	<span style="display: inline-block;"> <label>使用私钥加密后</label> <br /> <textarea id="encryptContent2" rows="5"
			cols="65"></textarea>
	</span>

	<span style="display: inline-block; width: 200px;"> <label>使用公钥解密后</label> <br /> <textarea
			id="decryptContent2" rows="2" cols="65"></textarea>
	</span>

</body>

</html>
